# 工作记录数据映射说明

本文档说明【添加工作记录】对话框中每个输入项与工作记录详细数据的对应关系。

## 📋 数据结构概览

工作记录数据结构 (WorkLog):
```typescript
{
  id: number;                    // 记录ID
  date: string;                  // 作业日期 (YYYY-MM-DD格式)
  projectGroup: string;          // 项目组
  project: string;               // 案件/项目名称
  phase: string;                 // 工程阶段 (一般案件) 或 '-' (保守对应)
  hours: number;                 // 工时
  startTime: string;             // 开始时间
  endTime: string;               // 结束时间
  description: string;           // 作业内容描述
  workType: string;              // 作业时间分类：'通常' | '残業' | '休日'
  workCategory: string;          // 作业分类：'normal' | 'jira' | 'management' | 'innovation'
  subType?: string;              // 子类型 (仅保守对应和成长与创新使用)
  jiraNumber?: string;           // JIRA号码/主题 (保守对应使用) 或 创新主题 (成长与创新使用)
  modifiedAt: string | null;    // 修改时间
}
```

---

## 🎯 一般案件对应 (workCategory = 'normal')

### 输入界面示意
```
┌─────────────────────────────────────────────────┐
│ 作业日期: [2026-01-09]                          │
│ 项目组: [项目组A] [项目组B] [项目组C] [Enhance]│
│                                                 │
│ 作业分类:                                       │
│  ┌─────────────────────────────────┐           │
│  │ ✓ 一般案件对应 - 项目开发工作    │           │
│  └─────────────────────────────────┘           │
│                                                 │
│ 选择案件: [项目A - ERP系统升级]                 │
│ 工程: [概要設計] [詳細設計] [開発] ...        │
│                                                 │
│ 作业时间分类: [通常] [残業] [休日]            │
│ 时间带选择: 08:30~09:00, 09:00~09:30...        │
│ 作业内容: [系统架构设计，编写概要设计文档]      │
└─────────────────────────────────────────────────┘
```

### 数据映射
| 输入项           | 映射字段        | 说明                         |
|------------------|----------------|------------------------------|
| 作业日期         | `date`         | YYYY-MM-DD格式               |
| 项目组           | `projectGroup` | 所选项目组名称               |
| 案件             | `project`      | 所选案件完整名称             |
| 工程             | `phase`        | 所选工程阶段 (22选1)         |
| 作业时间分类     | `workType`     | '通常' / '残業' / '休日'    |
| 时间带选择       | `hours`, `startTime`, `endTime` | 自动计算 |
| 作业内容         | `description`  | 用户输入的文本               |
| (固定值)         | `workCategory` | 'normal'                     |

### 示例数据
```javascript
{
  id: 1,
  date: '2026-01-09',
  projectGroup: '项目组A',
  project: '项目A - ERP系统升级',
  phase: '概要設計',                 // ← 选择的工程
  hours: 7.5,
  startTime: '08:30',
  endTime: '17:00',
  description: '系统架构设计，编写概要设计文档',
  workType: '通常',
  workCategory: 'normal',           // ← 固定为 'normal'
  modifiedAt: null
}
```

---

## 🔧 保守对应（JIRA/チャット）(workCategory = 'jira')

### 输入界面示意
```
┌─────────────────────────────────────────────────┐
│ 作业日期: [2026-01-08]                          │
│ 项目组: [项目组A]                               │
│                                                 │
│ 作业分类:                                       │
│  ┌─────────────────────────────────┐           │
│  │ ✓ 保守对应（JIRA/チャット）      │           │
│  │   日常维护工作                    │           │
│  └─────────────────────────────────┘           │
│                                                 │
│ 保守对应类型:                                   │
│  [JIRA对应] [チャット对应] [メール对应] [その他]│
│                                                 │
│ JIRA号码/主题: [JIRA-1234]                      │
│                                                 │
│ 作业时间分类: [通常]                            │
│ 时间带选择: 14:00~14:30, 14:30~15:00...        │
│ 作业内容: [生产环境Bug紧急修复]                 │
└─────────────────────────────────────────────────┘
```

### 数据映射
| 输入项           | 映射字段        | 说明                         |
|------------------|----------------|------------------------------|
| 作业日期         | `date`         | YYYY-MM-DD格式               |
| 项目组           | `projectGroup` | 所选项目组名称               |
| 保守对应类型     | `subType`      | 'JIRA对应' / 'チャット对应' 等 |
| JIRA号码/主题    | `jiraNumber`   | 用户输入                     |
| (固定值)         | `project`      | 根据subType自动设置          |
| (固定值)         | `phase`        | '-'                          |
| 作业时间分类     | `workType`     | '通常' / '残業' / '休日'    |
| 时间带选择       | `hours`, `startTime`, `endTime` | 自动计算 |
| 作业内容         | `description`  | 用户输入的文本               |
| (固定值)         | `workCategory` | 'jira'                       |

### 项目名称自动设置规则
```javascript
// 根据 subType 自动设置 project 字段
if (subType === 'JIRA对应') project = 'JIRA对应';
if (subType === 'チャット对应') project = 'チャット对应';
if (subType === 'メール对应') project = 'メール对应';
if (subType === 'そのた') project = '保守作业';
```

### 示例数据
```javascript
{
  id: 24,
  date: '2026-01-08',
  projectGroup: '项目组A',
  project: 'JIRA对应',              // ← 根据subType自动设置
  phase: '-',                       // ← 固定为 '-'
  hours: 2.0,
  startTime: '14:00',
  endTime: '16:00',
  description: 'JIRA-1234 生产环境Bug紧急修复',
  workType: '通常',
  workCategory: 'jira',             // ← 固定为 'jira'
  subType: 'JIRA对应',              // ← 用户选择的类型
  jiraNumber: 'JIRA-1234',          // ← 用户输入的号码
  modifiedAt: null
}
```

---

## 👥 保守对应（管理）(workCategory = 'management')

### 输入界面示意
```
┌─────────────────────────────────────────────────┐
│ 作业日期: [2026-01-09]                          │
│ 项目组: [项目组A]                               │
│                                                 │
│ 作业分类:                                       │
│  ┌─────────────────────────────────┐           │
│  │ ✓ 保守对应（管理）               │           │
│  │   会议和管理工作                  │           │
│  └─────────────────────────────────┘           │
│                                                 │
│ 管理对应类型:                                   │
│  [マネジメント会議] [日次定例] [週次定例]      │
│  [内部管理] [その他]                            │
│                                                 │
│ 会议主题/管理工作名称: [月度管理层会议] (可选) │
│                                                 │
│ 作业时间分类: [通常]                            │
│ 时间带选择: 14:00~14:30, 14:30~15:00...        │
│ 作业内容: [项目汇报和预算审查]                  │
└─────────────────────────────────────────────────┘
```

### 数据映射
| 输入项               | 映射字段        | 说明                         |
|---------------------|----------------|------------------------------|
| 作业日期             | `date`         | YYYY-MM-DD格式               |
| 项目组               | `projectGroup` | 所选项目组名称               |
| 管理对应类型         | `subType`      | 'マネジメント会議' / '日次定例' 等 |
| 会议主题/管理工作名称 | `jiraNumber`   | 用户输入 (可选)              |
| (固定值)             | `project`      | 根据subType自动设置          |
| (固定值)             | `phase`        | '-'                          |
| 作业时间分类         | `workType`     | '通常' / '残業' / '休日'    |
| 时间带选择           | `hours`, `startTime`, `endTime` | 自动计算 |
| 作业内容             | `description`  | 用户输入的文本               |
| (固定值)             | `workCategory` | 'management'                 |

### 项目名称自动设置规则
```javascript
// 根据 subType 自动设置 project 字段
if (subType === 'マネジメント会議') project = 'マネジメント会議';
if (subType === '日次定例') project = '日次定例会议';
if (subType === '週次定例') project = '週次定例会议';
if (subType === '内部管理') project = '内部管理工作';
if (subType === 'そのた') project = '其他管理工作';
```

### 示例数据
```javascript
{
  id: 33,
  date: '2026-01-09',
  projectGroup: '项目组A',
  project: 'マネジメント会議',      // ← 根据subType自动设置
  phase: '-',                       // ← 固定为 '-'
  hours: 2.0,
  startTime: '14:00',
  endTime: '16:00',
  description: '月度管理层会议 - 项目汇报和预算审查',
  workType: '通常',
  workCategory: 'management',       // ← 固定为 'management'
  subType: 'マネジメント会議',      // ← 用户选择的类型
  jiraNumber: '月度管理层会议',     // ← 用户输入的主题 (可选)
  modifiedAt: null
}
```

---

## 💡 成长与创新 (workCategory = 'innovation')

### 输入界面示意
```
┌─────────────────────────────────────────────────┐
│ 作业日期: [2026-01-09]                          │
│ 项目组: [项目组A]                               │
│                                                 │
│ 作业分类:                                       │
│  ┌─────────────────────────────────┐           │
│  │ ✓ 成长与创新                     │           │
│  │   个人成长与探索                  │           │
│  └─────────────────────────────────┘           │
│                                                 │
│ 成长与创新类型:                                 │
│  [技术预研] [管理与文化] [职业进修] [效率工具开发]│
│                                                 │
│ 创新主题: [AI代码辅助工具调研] (可选)           │
│                                                 │
│ 作业时间分类: [通常]                            │
│ 时间带选择: 16:00~16:30, 16:30~17:00...        │
│ 作业内容: [GitHub Copilot评估与实践]           │
└─────────────────────────────────────────────────┘
```

### 数据映射
| 输入项               | 映射字段        | 说明                         |
|---------------------|----------------|------------------------------|
| 作业日期             | `date`         | YYYY-MM-DD格式               |
| 项目组               | `projectGroup` | 所选项目组名称               |
| 成长与创新类型       | `subType`      | '技术预研' / '管理与文化' 等 |
| 创新主题             | `jiraNumber`   | 用户输入 (可选，复用字段)    |
| (固定值)             | `project`      | 根据subType自动设置          |
| (固定值)             | `phase`        | '-'                          |
| 作业时间分类         | `workType`     | '通常' / '残業' / '休日'    |
| 时间带选择           | `hours`, `startTime`, `endTime` | 自动计算 |
| 作业内容             | `description`  | 用户输入的文本               |
| (固定值)             | `workCategory` | 'innovation'                 |

### 项目名称自动设置规则
```javascript
// 根据 subType 自动设置 project 字段
if (subType === '技术预研') project = '技术预研';
if (subType === '管理与文化') project = '管理与文化';
if (subType === '职业进修') project = '职业进修';
if (subType === '效率工具开发') project = '效率工具开发';
```

### 示例数据
```javascript
{
  id: 46,
  date: '2026-01-09',
  projectGroup: '项目组A',
  project: '技术预研',              // ← 根据subType自动设置
  phase: '-',                       // ← 固定为 '-'
  hours: 1.0,
  startTime: '16:00',
  endTime: '17:00',
  description: 'AI代码辅助工具调研与实践 - GitHub Copilot评估',
  workType: '通常',
  workCategory: 'innovation',       // ← 固定为 'innovation'
  subType: '技术预研',              // ← 用户选择的类型
  jiraNumber: 'AI代码辅助工具调研', // ← 用户输入的主题 (可选)
  modifiedAt: null
}
```

---

## 🔍 列表显示逻辑

### 日期格式化
```javascript
// 输入格式: '2026-01-04'
// 显示格式: '2026/01/04(日)'

const formatDateWithWeekday = (dateStr) => {
  const date = new Date(dateStr);
  const weekdays = ['日', '月', '火', '水', '木', '金', '土'];
  const weekday = weekdays[date.getDay()];
  const year = date.getFullYear();
  const month = (date.getMonth() + 1).toString().padStart(2, '0');
  const day = date.getDate().toString().padStart(2, '0');
  return `${year}/${month}/${day}(${weekday})`;
};
```

### 每日合计计算
```javascript
// 按日期分组后，计算每日总工时
const dailyTotal = logsForDate.reduce((sum, log) => sum + log.hours, 0);
// 显示: 8.00h
```

### 显示规则

#### 一般案件对应
显示格式: `项目名 → 工程阶段`
```
项目A - ERP系统升级 → 概要設計
```

#### 保守对应（JIRA/チャット）
显示格式: `类型 | 子类型 → JIRA号码/主题`
```
JIRA对应 | JIRA对应 → JIRA-1234
チャット对应 | チャット对应 → 客户需求咨询
```

#### 保守对应（管理）
显示格式: `项目组 · 类型 | 子类型 → 会议主题`
```
项目组A · マネジメント会議 | マネジメント会議 → 月度管理层会议
项目组A · 日次定例会议 | 日次定例 → 团队日常站会
```

#### 成长与创新
显示格式: `项目组 · 类型 | 子类型 → 创新主题`
```
项目组A · 技术预研 | 技术预研 → AI代码辅助工具调研
项目组B · 效率工具开发 | 效率工具开发 → 自动化测试报告生成器
Enhance · 管理与文化 | 管理与文化 → 技術分享会
```

注：所有工作记录都会在项目名前显示项目组标签，方便快速识别。

---

## 📊 完整示例：一天的工作记录

```javascript
// 2026/01/09(金) - 日合计: 8.00h

// 记录1: 一般案件对应
{
  date: '2026-01-09',
  projectGroup: '项目组A',
  project: '项目A - ERP系统升级',
  phase: '概要設計',
  hours: 3.0,
  workCategory: 'normal',
  // 显示: 项目A - ERP系统升级 → 概要設計 | 3.0h
}

// 记录2: 一般案件对应
{
  date: '2026-01-09',
  projectGroup: '项目组B',
  project: '项目B - 移动端开发',
  phase: '詳細設計',
  hours: 2.5,
  workCategory: 'normal',
  // 显示: 项目B - 移动端开发 → 詳細設計 | 2.5h
}

// 记录3: 保守对应（管理）
{
  date: '2026-01-09',
  projectGroup: '项目组A',
  project: '日次定例会议',
  phase: '-',
  hours: 0.5,
  workCategory: 'management',
  subType: '日次定例',
  jiraNumber: '团队日常站会',
  // 显示: 日次定例会议 | 日次定例 → 团队日常站会 | 0.5h
}

// 记录4: 保守对应（管理）
{
  date: '2026-01-09',
  projectGroup: '项目组A',
  project: 'マネジメント会議',
  phase: '-',
  hours: 2.0,
  workCategory: 'management',
  subType: 'マネジメント会議',
  jiraNumber: '月度管理层会议',
  // 显示: マネジメント会議 | マネジメント会議 → 月度管理层会议 | 2.0h
}
```

---

## ⚙️ 技术要点

### 1. 作业分类判断
```javascript
// 通过 workCategory 字段判断
if (workCategory === 'normal') {
  // 显示：项目名 → 工程阶段
  // phase 字段有值
}
if (workCategory === 'jira') {
  // 显示：类型 | 子类型 → JIRA号码
  // phase = '-', 使用 subType 和 jiraNumber
}
if (workCategory === 'management') {
  // 显示：类型 | 子类型 → 会议主题
  // phase = '-', 使用 subType 和 jiraNumber
}
```

### 2. 字段共用说明
- `jiraNumber` 字段在保守对应中共用：
  - JIRA/チャット：存储JIRA号码或主题
  - 管理对应：存储会议主题或管理工作名称

### 3. 自动设置字段
- `project`: 根据workCategory和subType自动设置
- `phase`: 一般案件有值，保守对应固定为 '-'
- `workCategory`: 根据用户选择的作业分类设置

---

## 📝 注意事项

1. **日期格式统一**: 数据库存储为 'YYYY-MM-DD'，显示为 'YYYY/MM/DD(weekday)'
2. **工时自动计算**: 根据选择的时间带自动计算 hours, startTime, endTime
3. **project 字段自动填充**: 保守对应的 project 根据 subType 自动设置
4. **phase 字段规则**: 只有一般案件使用，保守对应固定为 '-'
5. **每日合计**: 按日期分组后自动计算并显示
6. **显示顺序**: 同一日期内按 一般案件→保守(JIRA)→保守(管理) 顺序显示

---

## 📊 工时统计分析页面数据映射

### 概述
工时统计分析页面从工作记录数据中提取并聚合统计信息，提供多维度的工时分析视图。所有统计数据均基于用户选定的时间范围动态计算。

### 时间范围选择
- **默认时间范围**: 当前薪资周期（21日～次月20日）
- **可调整范围**: 用户可自由选择统计开始日期和结束日期
- **数据过滤**: 所有统计仅包含 `date >= statsStartDate && date <= statsEndDate` 的记录

### 核心指标卡片

#### 1. 总工时 (Total Hours)
```javascript
// 计算逻辑
const totalHours = filteredLogs.reduce((sum, log) => sum + log.hours, 0);

// 数据来源
WorkLog.hours  // 所有符合日期范围的记录的工时之和

// 显示格式
"168.5h"  // 保留1位小数
```

#### 2. 平均每日工时 (Average Daily Hours)
```javascript
// 计算逻辑
const workDays = new Set(filteredLogs.map(log => log.date)).size;
const avgHours = workDays > 0 ? totalHours / workDays : 0;

// 数据来源
WorkLog.date   // 统计有工作记录的唯一日期数
WorkLog.hours  // 总工时

// 显示格式
"8.4h"  // 总工时 ÷ 工作天数，保留1位小数
```

#### 3. 加班工时 (Overtime Hours)
```javascript
// 计算逻辑：每日工时超过8小时的部分累计
const dailyHours = new Map<string, number>();  // 按日期汇总
filteredLogs.forEach(log => {
  const current = dailyHours.get(log.date) || 0;
  dailyHours.set(log.date, current + log.hours);
});
const overtimeHours = Array.from(dailyHours.values()).reduce(
  (sum, hours) => sum + Math.max(0, hours - 8), 0
);

// 数据来源
WorkLog.date   // 分组依据
WorkLog.hours  // 每日累计工时

// 计算规则
// 如果某日总工时 > 8小时，则 (当日总工时 - 8) 计入加班
// 如果某日总工时 ≤ 8小时，则加班工时为 0

// 显示格式
"15.5h"  // 所有超过8小时/天部分的累计，保留1位小数
```

#### 4. 工作天数 (Work Days)
```javascript
// 计算逻辑
const workDays = new Set(filteredLogs.map(log => log.date)).size;

// 数据来源
WorkLog.date  // 统计唯一日期数量

// 显示格式
"20天"  // 有工作记录的不同日期总数
```

---

### 作业分类工时分布（饼图）

#### 数据维度
按 `workCategory` 字段分组统计工时

```javascript
// 数据来源字段
WorkLog.workCategory  // 'normal' | 'jira' | 'management' | 'innovation'
WorkLog.hours         // 该分类的累计工时

// 统计逻辑
const categoryStats = new Map<string, number>();
filteredLogs.forEach(log => {
  const current = categoryStats.get(log.workCategory) || 0;
  categoryStats.set(log.workCategory, current + log.hours);
});
```

#### 分类映射与颜色
| workCategory | 显示名称 | 颜色代码 | 说明 |
|--------------|---------|---------|------|
| `normal` | 一般案件对应 | `#8b5cf6` (紫色) | 项目开发工作 |
| `jira` | JIRA/チャット | `#f97316` (橙色) | 日常维护工作 |
| `management` | 保守对应（管理） | `#10b981` (绿色) | 会议和管理工作 |
| `innovation` | 成长与创新 | `#06b6d4` (青色) | 个人成长与探索 |

#### 显示内容
- **饼图标签**: 分类名称 + 百分比 (如: "一般案件对应 50.7%")
- **Tooltip**: 分类名称 + 工时 + 百分比
- **详细数据卡片**: 工时数值 + 百分比

---

### 项目组工时统计（柱状图）

#### 数据维度
按 `projectGroup` 字段分组统计工时

```javascript
// 数据来源字段
WorkLog.projectGroup  // '项目组A' | '项目组B' | '项目组C' | 'Enhance'
WorkLog.hours         // 该项目组的累计工时

// 统计逻辑
const projectGroupStats = new Map<string, number>();
filteredLogs.forEach(log => {
  const current = projectGroupStats.get(log.projectGroup) || 0;
  projectGroupStats.set(log.projectGroup, current + log.hours);
});

// 转换为图表数据
const projectGroupData = Array.from(projectGroupStats.entries()).map(([name, hours]) => ({
  name,      // X轴：项目组名称
  hours,     // Y轴：工时数
}));
```

#### 显示内容
- **X轴**: 项目组名称
- **Y轴**: 工时（小时）
- **柱状图颜色**: `#14b8a6` (青绿色)
- **Tooltip**: 项目组名称 + 工时数值

---

### Top 5 项目工时明细

#### 数据维度
按 `project` 字段分组统计工时，取前5名

```javascript
// 数据来源字段
WorkLog.project  // 项目/案件完整名称
WorkLog.hours    // 该项目的累计工时

// 统计逻辑
const projectStats = new Map<string, number>();
filteredLogs.forEach(log => {
  const current = projectStats.get(log.project) || 0;
  projectStats.set(log.project, current + log.hours);
});

// 排序并取前5
const topProjects = Array.from(projectStats.entries())
  .sort((a, b) => b[1] - a[1])  // 按工时降序排列
  .slice(0, 5);                  // 取前5名
```

#### 显示内容
- **排名**: 1～5 的圆形徽章
- **项目名称**: `project` 字段值
- **工时**: 该项目的累计工时（小时）
- **百分比**: 该项目工时占总工时的比例
- **进度条**: 可视化百分比，使用渐变色 `from-pink-500 to-rose-600`

#### 显示格式示例
```
🔵 1  项目A - ERP系统升级        85.5h (50.7%)
    [████████████████████████████████     ] 50.7%

🔵 2  项目B - 移动端开发          65.0h (38.6%)
    [████████████████████████             ] 38.6%

🔵 3  JIRA对应                    18.0h (10.7%)
    [██████                              ] 10.7%
```

---

### 作业分类详细数据卡片

#### 数据维度
与饼图相同，但以卡片形式平铺展示

```javascript
// 数据结构
categoryData = [
  { 
    name: '一般案件对应', 
    value: 85.5,           // 从 categoryStats.get('normal') 获取
    color: '#8b5cf6'       // 紫色
  },
  { 
    name: 'JIRA/チャット', 
    value: 30.0,           // 从 categoryStats.get('jira') 获取
    color: '#f97316'       // 橙色
  },
  { 
    name: '保守对应（管理）', 
    value: 35.0,           // 从 categoryStats.get('management') 获取
    color: '#10b981'       // 绿色
  },
  { 
    name: '成长与创新', 
    value: 18.0,           // 从 categoryStats.get('innovation') 获取
    color: '#06b6d4'       // 青色
  }
].filter(item => item.value > 0);  // 过滤掉工时为0的分类
```

#### 显示内容
每个卡片包含：
- **颜色标识**: 3x3px 圆形色块
- **分类名称**: workCategory 对应的显示名称
- **工时数值**: 保留1位小数 (如: "85.5h")
- **占比**: 该分类占总工时的百分比 (如: "占比 50.7%")

---

### 统计数据更新机制

#### 响应式计算
```javascript
// 每次时间范围变化时，重新计算所有统计数据
const stats = calculateStats();  // 实时计算

// 触发条件
onChange: statsStartDate  // 开始日期改变
onChange: statsEndDate    // 结束日期改变
```

#### 数据过滤逻辑
```javascript
const filteredLogs = SAMPLE_WORK_LOGS.filter(log => 
  log.date >= statsStartDate && log.date <= statsEndDate
);
// 所有统计均基于 filteredLogs 计算
```

---

### 字段映射总览

| 统计项 | 使用的WorkLog字段 | 计算逻辑 |
|--------|------------------|----------|
| 总工时 | `hours` | SUM(hours) |
| 平均每日工时 | `date`, `hours` | SUM(hours) ÷ COUNT(DISTINCT date) |
| 加班工时 | `date`, `hours` | SUM(MAX(每日总工时 - 8, 0)) |
| 工作天数 | `date` | COUNT(DISTINCT date) |
| 作业分类分布 | `workCategory`, `hours` | GROUP BY workCategory, SUM(hours) |
| 项目组统计 | `projectGroup`, `hours` | GROUP BY projectGroup, SUM(hours) |
| Top5项目 | `project`, `hours` | GROUP BY project, SUM(hours) ORDER BY hours DESC LIMIT 5 |

---

### 示例数据计算

假设统计时间范围：2026-01-01 ~ 2026-01-31，包含以下记录：

```javascript
[
  { date: '2026-01-09', workCategory: 'normal', projectGroup: '项目组A', 
    project: '项目A - ERP系统升级', hours: 3.0 },
  { date: '2026-01-09', workCategory: 'normal', projectGroup: '项目组B', 
    project: '项目B - 移动端开发', hours: 2.5 },
  { date: '2026-01-09', workCategory: 'management', projectGroup: '项目组A', 
    project: '日次定例会议', hours: 0.5 },
  { date: '2026-01-09', workCategory: 'management', projectGroup: '项目组A', 
    project: 'マネジメント会議', hours: 2.0 },
  { date: '2026-01-09', workCategory: 'innovation', projectGroup: '项目组A', 
    project: '技术预研', hours: 1.0 },
  // ... 更多记录
]
```

#### 计算结果：
- **总工时**: 9.0h (3.0 + 2.5 + 0.5 + 2.0 + 1.0)
- **工作天数**: 1天 (只有2026-01-09)
- **平均每日**: 9.0h (9.0 ÷ 1)
- **加班工时**: 1.0h (9.0 - 8.0)

#### 作业分类分布：
- 一般案件对应: 5.5h (61.1%)
- 保守对应（管理）: 2.5h (27.8%)
- 成长与创新: 1.0h (11.1%)

#### 项目组分布：
- 项目组A: 6.5h
- 项目组B: 2.5h

#### Top 3项目：
1. 项目A - ERP系统升级: 3.0h (33.3%)
2. 项目B - 移动端开发: 2.5h (27.8%)
3. マネジメント会議: 2.0h (22.2%)

---

### 视觉设计与数据的对应

#### 颜色编码系统
| 数据类型 | 主色调 | 渐变起始 | 渐变结束 | 适用元素 |
|---------|--------|---------|---------|----------|
| 总工时 | 蓝色 | `from-blue-500/20` | `to-cyan-500/20` | 卡片背景 |
| 平均每日 | 绿色 | `from-green-500/20` | `to-emerald-500/20` | 卡片背景 |
| 加班工时 | 橙色 | `from-orange-500/20` | `to-red-500/20` | 卡片背景 |
| 工作天数 | 紫色 | `from-purple-500/20` | `to-pink-500/20` | 卡片背景 |
| 作业分类图表 | 渐变 | `from-indigo-50/80` | `to-purple-50/80` | 图表容器 |
| 项目组图表 | 渐变 | `from-teal-50/80` | `to-cyan-50/80` | 图表容器 |
| Top5项目 | 渐变 | `from-pink-50/80` | `to-rose-50/80` | 列表容器 |

#### 图标对应
| 统计项 | 图标 | Lucide React组件 |
|--------|------|------------------|
| 总工时 | 时钟 | `<Clock className="w-5 h-5 text-blue-600" />` |
| 平均每日 | 趋势 | `<TrendingUp className="w-5 h-5 text-green-600" />` |
| 加班工时 | 警告 | `<AlertCircle className="w-5 h-5 text-orange-600" />` |
| 工作天数 | 日历 | `<CalendarIcon className="w-5 h-5 text-purple-600" />` |
| 作业分类 | 饼图 | `<PieChartIcon className="w-5 h-5 text-indigo-600" />` |
| 项目组 | 用户组 | `<Users className="w-5 h-5 text-teal-600" />` |
| Top5项目 | 柱状图 | `<BarChart3 className="w-5 h-5 text-pink-600" />` |

---

### 技术实现要点

#### 1. 数据聚合
所有统计均在前端实时计算，无需后端API。使用JavaScript的Map结构进行高效分组聚合。

#### 2. 图表库
使用 **Recharts** 库实现数据可视化：
- `<PieChart>`: 作业分类饼图
- `<BarChart>`: 项目组柱状图
- 自定义Tooltip组件：统一的玻璃拟态风格

#### 3. 响应式设计
- 对话框宽度: `!w-[96vw] !max-w-[96vw]` (充分利用屏幕空间)
- 网格布局: 
  - 核心指标: `grid-cols-4`
  - 图表区域: `grid-cols-2`
  - 详细卡片: `grid-cols-4`

#### 4. 性能优化
- 使用 `useMemo` 缓存计算结果（如需优化可添加）
- 过滤数据量通常较小，直接遍历计算即可

---

## 🎯 统计分析使用场景

1. **个人工时审查**: 员工查看自己的工时分布是否合理
2. **项目时间管理**: 了解各项目的时间投入比例
3. **加班监控**: 识别加班过多的时间段
4. **成长投入检查**: 确认"成长与创新"时间是否达到建议的5%
5. **团队效率分析**: Leader查看团队成员的工时分配情况

---

## ⚠️ 统计数据注意事项

1. **时区一致性**: 所有日期计算基于本地时区
2. **加班计算规则**: 按自然日计算，每日超过8小时的部分累计
3. **动态更新**: 修改时间范围后，所有图表和数字自动重新计算
4. **空数据处理**: 如果某分类工时为0，不在饼图和详细卡片中显示
5. **百分比精度**: 所有百分比保留1位小数
6. **工时精度**: 所有工时数值保留1位小数